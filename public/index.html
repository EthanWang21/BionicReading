<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bionic Reading Filter</title>

    <!-- Styles -->
    <style>
        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            margin: 20px;
        }

        h1, h2 {
            color: #333;
        }

        textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            font-size: 16px;
        }

        button {
            padding: 10px;
            font-size: 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            margin-right: 10px;
        }

        button:hover {
            background-color: #45a049;
        }

        #colorPicker {
            margin-right: 10px;
        }

        #filteredText {
            margin-top: 20px;
            font-size: 18px;
        }

        /* Custom class for styling the boldened part */
        .customBold {
            font-weight: bold;
            color: blue; /* You can set the default color here */
        }
    </style>
</head>
<body>
    <!-- Header -->
    <h1>Bionic Reading Filter</h1>

    <!-- Input Area -->
    <textarea id="inputText" rows="5" placeholder="Enter text..."></textarea>
    <br>

    <!-- Filter Button -->
    <button onclick="applyFilter()">Apply Bionic Reading Filter</button>

    <!-- Color Picker -->
    <input type="color" id="colorPicker" value="#0000ff" title="Pick a color">

    <!-- Change Color Button -->
    <button onclick="changeColor()">Change Bold Color</button>
    <br>

    <!-- Result Section -->
    <h2>Filtered Text</h2>
    <div id="filteredText"></div>

    <!-- Scripts -->
    <script>
        // Function to apply the bionic reading filter
        function applyFilter() {
            const inputText = document.getElementById('inputText').value;

            // Make a POST request to the Node.js server
            fetch('http://localhost:3000/applyBionicReadingFilter', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ inputData: inputText }),
            })
            .then(response => response.text())
            .then(data => {
                // Convert ANSI escape codes to HTML tags
                const htmlContent = data.replace(/\033\[1m/g, '<span class="customBold">')
                                       .replace(/\033\[0m/g, '</span>');

                // Insert a line break every 6 periods
                const sentences = htmlContent.split('.');
                const sentencesWithLineBreaks = sentences.map((sentence, index) => (index > 0 && index % 6 === 0) ? '<br><br>' + sentence + '.' : sentence + '.');
                const modifiedText = sentencesWithLineBreaks.join(' ');

                // Display the modified text
                document.getElementById('filteredText').innerHTML = modifiedText;
            })
            .catch(error => console.error('Error:', error));
        }

        // Function to change the color of the boldened part
        function changeColor() {
            const colorPicker = document.getElementById('colorPicker');
            const newColor = colorPicker.value;

            // Update the color of all elements with the customBold class
            const boldElements = document.getElementsByClassName('customBold');
            Array.from(boldElements).forEach(element => {
                element.style.color = newColor;
            });
        }
    </script>
</body>
</html>
